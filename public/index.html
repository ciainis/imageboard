<!doctype html>
<html>
<head>
    <title>Image Board</title>
    <link href="https://fonts.googleapis.com/css?family=Just+Me+Again+Down+Here" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <link rel="stylesheet" href="/styles/styles.css">
</head>
<body>
    <div id="main">

        <imagemodal
            v-if="currentImage.id"
            :data="currentImage"
            @close="closeModal"
            >
        </imagemodal>

        <div class="header__title">{{pageTitle}}</div>

        <div class="form">
            <input class="input" type="text" name="title" placeholder="title" v-model="input.title" autocomplete="off">
            <input class="input" type="text" name="description" placeholder="description" v-model="input.description" autocomplete="off" >
            <input class="input" type="text" name="username" placeholder="username" v-model="input.username" autocomplete="off" >
            <input class="input__file" id="fileInput" name="file" type="file" accept="image/*">
            <span title="attach file" id="input__file__fake">choose a file</span>            
            <button class="btn" @click="upload">ADD IMAGE</button>
        </div>   

        <div class="cards__container">
            <div class="cards" v-if="results.length > 0">
                <div class="images__container" v-for="result in results">
                    <svg class="like" xmlns:x="http://ns.adobe.com/Extensibility/1.0/" xmlns:i="http://ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="http://ns.adobe.com/Graphs/1.0/" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 64 80" enable-background="new 0 0 64 64" xml:space="preserve"><metadata><sfw xmlns="http://ns.adobe.com/SaveForWeb/1.0/"><slices/><sliceSourceBounds height="16384" width="16389" x="-8165" y="-8160" bottomLeftOrigin="true"/></sfw></metadata><g><g>
                        <path d="M49.92,26c0-0.498,0.35-1.183,0.687-1.846c0.52-1.019,1.107-2.174,0.793-3.352c-0.326-1.22-1.438-1.939-2.419-2.573    c-0.604-0.391-1.229-0.795-1.459-1.19c-0.237-0.41-0.276-1.165-0.315-1.894c-0.061-1.156-0.13-2.466-1.008-3.344    s-2.188-0.947-3.344-1.008c-0.729-0.039-1.483-0.078-1.894-0.316c-0.396-0.229-0.8-0.854-1.191-1.458    c-0.634-0.981-1.353-2.093-2.571-2.419c-0.22-0.059-0.451-0.088-0.688-0.088c-0.935,0-1.813,0.448-2.665,0.881    C33.183,7.731,32.497,8.08,32,8.08c-0.497,0-1.183-0.349-1.846-0.687c-0.851-0.434-1.73-0.881-2.664-0.881    c-0.237,0-0.468,0.029-0.688,0.088c-1.22,0.327-1.939,1.439-2.573,2.42c-0.391,0.604-0.795,1.229-1.19,1.458    c-0.41,0.237-1.165,0.277-1.894,0.315c-1.156,0.061-2.466,0.13-3.344,1.008s-0.947,2.188-1.008,3.343    c-0.038,0.729-0.078,1.484-0.315,1.895c-0.229,0.396-0.854,0.8-1.458,1.19c-0.981,0.634-2.094,1.353-2.42,2.574    c-0.314,1.176,0.274,2.332,0.793,3.351c0.338,0.663,0.688,1.349,0.688,1.846c0,0.497-0.349,1.183-0.687,1.846    c-0.52,1.019-1.108,2.174-0.793,3.352c0.326,1.22,1.438,1.938,2.419,2.573c0.604,0.391,1.229,0.794,1.458,1.19    c0.238,0.41,0.277,1.165,0.316,1.895c0.061,1.155,0.13,2.465,1.008,3.343c0.878,0.878,2.188,0.947,3.343,1.008    c0.341,0.019,0.684,0.038,0.999,0.077l-5.051,10.944c-0.169,0.367-0.101,0.801,0.173,1.098c0.276,0.298,0.702,0.397,1.081,0.26    l4.37-1.609l1.61,4.369c0.14,0.38,0.495,0.638,0.899,0.653C25.237,57,25.25,57,25.264,57c0.389,0,0.744-0.226,0.908-0.581    l5.765-12.489c0.02-0.002,0.043-0.01,0.063-0.01c0.351,0,0.797,0.177,1.261,0.398l4.137,13.444    c0.119,0.387,0.459,0.663,0.862,0.701c0.031,0.004,0.062,0.005,0.094,0.005c0.368,0,0.709-0.202,0.884-0.532l2.181-4.116    L45.532,56c0.357,0.189,0.793,0.146,1.105-0.113c0.312-0.258,0.438-0.678,0.318-1.064L42.77,41.211    c0.028-0.001,0.057-0.003,0.085-0.005c1.156-0.061,2.466-0.13,3.344-1.008s0.947-2.188,1.008-3.343    c0.039-0.729,0.078-1.483,0.315-1.894c0.229-0.396,0.854-0.8,1.459-1.191c0.981-0.634,2.093-1.353,2.419-2.573    c0.314-1.177-0.273-2.332-0.793-3.351C50.27,27.184,49.92,26.498,49.92,26z M25.367,53.389l-1.121-3.042    c-0.191-0.519-0.764-0.783-1.284-0.593l-3.043,1.121l3.915-8.484c0.132,0.19,0.264,0.389,0.395,0.59    c0.634,0.981,1.353,2.093,2.573,2.419c0.219,0.059,0.45,0.089,0.687,0.089c0.596,0,1.167-0.189,1.726-0.435L25.367,53.389z     M41.47,51.585c-0.234-0.125-0.51-0.15-0.762-0.072c-0.254,0.078-0.466,0.254-0.59,0.488L38.6,54.868l-2.923-9.499    c0.274,0.069,0.551,0.119,0.834,0.119c0.236,0,0.468-0.03,0.687-0.089c1.221-0.326,1.939-1.438,2.573-2.419    c0.341-0.527,0.691-1.055,1.039-1.337l3.524,11.459L41.47,51.585z M48.825,28.754c0.355,0.699,0.759,1.491,0.643,1.927    c-0.127,0.475-0.862,0.951-1.573,1.41c-0.803,0.519-1.634,1.056-2.104,1.869c-0.479,0.826-0.531,1.824-0.582,2.79    c-0.044,0.835-0.09,1.698-0.425,2.034c-0.336,0.335-1.199,0.381-2.035,0.425c-0.965,0.051-1.963,0.104-2.79,0.582    c-0.812,0.47-1.35,1.301-1.868,2.104c-0.459,0.711-0.935,1.446-1.41,1.573c-0.051,0.014-0.106,0.021-0.17,0.021    c-0.454,0-1.116-0.338-1.757-0.664C33.88,42.38,32.977,41.92,32,41.92c-0.978,0-1.88,0.46-2.754,0.905    c-0.729,0.37-1.503,0.755-1.927,0.643c-0.476-0.127-0.951-0.862-1.411-1.573c-0.52-0.803-1.056-1.633-1.869-2.103    c-0.826-0.479-1.824-0.531-2.79-0.582c-0.835-0.044-1.699-0.09-2.035-0.425c-0.335-0.335-0.381-1.199-0.425-2.034    c-0.051-0.966-0.104-1.964-0.582-2.791c-0.471-0.812-1.301-1.35-2.104-1.869c-0.711-0.459-1.446-0.935-1.573-1.41    c-0.117-0.436,0.287-1.229,0.643-1.927c0.445-0.874,0.905-1.776,0.905-2.754s-0.46-1.881-0.905-2.754    c-0.356-0.699-0.76-1.491-0.643-1.926c0.127-0.476,0.862-0.951,1.573-1.41c0.804-0.519,1.634-1.056,2.104-1.869    c0.479-0.827,0.531-1.825,0.582-2.791c0.044-0.835,0.089-1.699,0.424-2.034c0.335-0.335,1.199-0.381,2.035-0.425    c0.965-0.051,1.964-0.103,2.791-0.581c0.812-0.471,1.349-1.301,1.869-2.104c0.459-0.711,0.935-1.446,1.41-1.573    c0.418-0.117,1.198,0.271,1.927,0.643C30.119,9.62,31.022,10.08,32,10.08s1.88-0.46,2.754-0.905    c0.729-0.372,1.506-0.76,1.928-0.643c0.475,0.126,0.949,0.861,1.408,1.572c0.52,0.803,1.057,1.634,1.869,2.104    c0.826,0.479,1.825,0.531,2.791,0.582c0.835,0.044,1.699,0.09,2.034,0.425c0.335,0.335,0.381,1.199,0.425,2.035    c0.051,0.966,0.104,1.964,0.582,2.791c0.47,0.812,1.301,1.35,2.104,1.869c0.711,0.459,1.446,0.935,1.573,1.41    c0.116,0.436-0.287,1.229-0.644,1.927C48.38,24.12,47.92,25.023,47.92,26S48.38,27.881,48.825,28.754z"/>
                        <path d="M32,11c-8.271,0-15,6.729-15,15c0,8.271,6.729,15,15,15s15-6.729,15-15C47,17.729,40.271,11,32,11z M32,39    c-7.168,0-13-5.832-13-13c0-7.168,5.832-13,13-13s13,5.832,13,13C45,33.168,39.168,39,32,39z"/><path d="M38,25H26c-0.552,0-1,0.448-1,1s0.448,1,1,1h12c0.553,0,1-0.448,1-1S38.553,25,38,25z"/><path d="M34,29h-4c-0.552,0-1,0.448-1,1s0.448,1,1,1h4c0.553,0,1-0.448,1-1S34.553,29,34,29z"/>
                        <path d="M38,21H26c-0.552,0-1,0.448-1,1s0.448,1,1,1h12c0.553,0,1-0.448,1-1S38.553,21,38,21z"/></g></g>
                    </svg>
                    <svg class="comment__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 30 37.5" style="enable-background:new 0 0 30 30;" xml:space="preserve">
                        <path d="M26,1H4C2.346,1,1,2.346,1,4v16c0,1.654,1.346,3,3,3h3.55l-0.544,4.89c-0.046,0.413,0.168,0.811,0.537,1  C7.688,28.964,7.844,29,8,29c0.241,0,0.481-0.088,0.669-0.257L15.051,23H26c1.654,0,3-1.346,3-3V4C29,2.346,27.654,1,26,1z M27,20  c0,0.551-0.448,1-1,1H14.667c-0.247,0-0.485,0.091-0.669,0.257l-4.714,4.242l0.377-3.389c0.031-0.283-0.06-0.565-0.249-0.777  S8.951,21,8.667,21H4c-0.552,0-1-0.449-1-1V4c0-0.551,0.448-1,1-1h22c0.552,0,1,0.449,1,1V20z"/>
                        <path d="M24,6H6C5.447,6,5,6.448,5,7s0.447,1,1,1h18c0.553,0,1-0.448,1-1S24.553,6,24,6z"/>
                        <path d="M24,11H6c-0.553,0-1,0.448-1,1s0.447,1,1,1h18c0.553,0,1-0.448,1-1S24.553,11,24,11z"/>
                        <path d="M24,16H6c-0.553,0-1,0.448-1,1s0.447,1,1,1h18c0.553,0,1-0.448,1-1S24.553,16,24,16z"/>
                    </svg>
                    <img class="image" :src="result.url" @click="showModal(result)"/>
                    <p class="title">{{result.title}}</p>
                </div>
                <div class="button__container" v-if="showButton">
                    <button class="btn__load" @click="loadMore">LOAD MORE</button>
                </div>
            </div>
        </div>

    </div>


    <!-- SHOW COMMENTS TEMPLATE -->
    <script id="showcomment__template" type="text/x-template">
        <div class="comments__container">
            <div class="comments" v-if="results.length > 0">
                <div class="comment__box" v-for="result in results">
                    <p class="comment__username"><b>{{result.username}}</b> said :</p>
                    <p class="comment__comment">"{{result.comment}}"</p> 
                    <p class="comment__date"><em>{{result.created_at}}</em></p>                 
                </div>
            </div>
        </div>
    </script>


    <!-- ADD COMMENTS TEMPLATE -->
    <script id="addcomments__template" type="text/x-template">
        <div class="addcomments__container">
            <p class="title__comment">COMMENTS</p>
            <div class="form__comment">
                <input v-model="commentInput.username" class="comment__input" type="text" name="username" placeholder="username" autocomplete="off">
                <input v-model="commentInput.comment" class="comment__input" type="text" name="comment" placeholder="comment" autocomplete="off">
                <button class="comment__btn" @click="submitComment">SUBMIT</button>
            </div>
            <showcomment
                :imageID="id"
                :newcomment="comments"
            >
            </showcomment>
        </div>
    </script>


    <!-- MODAL TEMPLATE -->
    <script id="modal__template" type="text/x-template">
        <div class="modal">
            <svg @click="nextImage" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 100 125" x="0px" y="0px">
                <title>Ui_Thin_Icon_Left</title>
                <path d="M50,89.38A39.38,39.38,0,1,1,89.38,50,39.42,39.42,0,0,1,50,89.38Zm0-74.75A35.38,35.38,0,1,0,85.38,50,35.4,35.4,0,0,0,50,14.63Zm5.34,50a2,2,0,0,0,0-2.83L43.56,50,55.34,38.23a2,2,0,0,0-2.83-2.83L39.32,48.59a2,2,0,0,0,0,2.82L52.51,64.6a2,2,0,0,0,1.41.59A2,2,0,0,0,55.34,64.6Z"/>
            </svg>
            <div class="dark" @click="close"></div>
            <div class="modal__container">
                <div class="image__info">
                    <img class="image__modal" :src="data.url"/>
                    <p class="title__modal">{{data.title}}</p>
                    <p class="description__modal"><em>{{data.description}}</em></p>
                    <p class="username__modal"> Uploaded by <b>{{data.username}}</b> on <em>{{data.created_at}}</em></p>
                </div>
                <addcomments
                    :id="data.id"
                >
                </addcomments>
            </div>
            <svg @click="prevImage" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 100 125" x="0px" y="0px">
                <title>Ui_Thin_Icon_Right</title>
                <path d="M50,89.38A39.38,39.38,0,1,1,89.38,50,39.42,39.42,0,0,1,50,89.38Zm0-74.75A35.38,35.38,0,1,0,85.38,50,35.4,35.4,0,0,0,50,14.63Zm-2.51,50L60.68,51.41a2,2,0,0,0,0-2.82L47.49,35.4a2,2,0,0,0-2.83,2.83L56.44,50,44.66,61.77a2,2,0,1,0,2.83,2.83Z"/>
            </svg>
        </div>
    </script>

    
    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/moment.js"></script>
    <script src="/js/script.js"></script>
    <script>
        var input = document.getElementById('fileInput')
        var fakeInput = document.getElementById('input__file__fake')

        fakeInput.addEventListener('click', function(){
            input.click()
        })

        input.addEventListener('change', function() {
            var file = input.value.split("\\")
            var fileName = file[file.length-1]
            if (fileName.length > 0) {
                fakeInput.innerHTML = fileName 
            } else if (fileName === "") {
                fakeInput.innerHTML = 'choose a file'
            }  
        })
    </script>
</body>
</html>
